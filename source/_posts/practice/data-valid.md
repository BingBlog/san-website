---
title: 什么东西可以保存在data里？
categories:
- practice
---


在San的文档中写道："San 是一个 MVVM 的组件框架，通过 San 的视图引擎能够让用户只用操作数据，视图自动更新。"。这里要说的data指的就是用户操作的"数据"。
对于一个组件，讨论什么东西可以保存在data里，也就是要讨论，哪些数据可以保存在data中。

#### 组件状态
通常，我们将数据又称之为组件的状态，那么什么是组件的状态呢？对于一个组件，首先搞要清楚，该组件有哪些状态，这些状态从何而来。 在San中，判断一个变量是否可以作为组件的状态可以采用如下规则：
1、该变量更改后会影响视图，有时仅会影响特定情况下的视图；
2、该变量在整个组件的生命周期中是否不会改变？如果是，则该变量不是一个状态；
3、该变量是否可以通过其它状态计算得到？如果是，则该变量不是一个状态；

#### data数据的来源
对于一个组件，data数据的来源可分为如下两种：
1、组件自身的定义的数据;
2、从父组件中传入的数据;

根据数据的来源，将组件自身定义的数据（状态）保存在该组件的data中，可以对其进行修改从而影响当前组件以及子组件的视图；而对于从父组件传入的数据，也保存在该组件的data中，但通常我们只是使用这个数据，如果要更改从父组件传入的数据，虽然可以直接在组件内更改，但通常的做法是到该数据初始化的地方去更改。

在San中，数据的绑定分为单向绑定和双向绑定。个人觉得，在父子组件之间进行数据传输最好使用单向绑定，让数据往下传输，再使用事件或者dispatch将子组件状态的更改通知给父组件或者祖级组件，从而实现单向数据流。而双向绑定，常常仅限于form组件内部使用。

#### 对于data需要思考的地方
我们讨论了，什么东西可以保存在data里。对于data数据，我们需要思考几个问题：

##### data数据的作用域
该数据会影响哪些组件？数据影响组件的范围和深度决定了该数据的作用域。明确数据的作用域，以及在该作用域中保持该数据的一致性非常重要。一旦确定了数据的作用域，保持数据一致性的最好的做法就是，仅在初始化该数据的地方去修改数据。

##### data数据的生命周期
通常情况下，数据的生命周期与组件的生命周期是一致的。如果要打破这种一致性，可以考虑使用store。但需要思考，该数据是否需要放到store中。